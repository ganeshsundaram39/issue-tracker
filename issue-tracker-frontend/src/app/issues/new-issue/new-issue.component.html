<div class="new-issue-container">
  <mat-card class="mat-elevation-z8">
    <h2>New Issue</h2>

    <div class="new-issue-form-wrapper">
      <div class="first">
        <img src="../../../assets/images/bug_fixing.svg" alt="bug fixing" />
      </div>

      <div class="second">
        <form [formGroup]="newIssueForm" (ngSubmit)="onNewIssue()">
          <mat-form-field appearance="fill" class="w-100 mb-2">
            <mat-label>Enter Title</mat-label>
            <input type="text" matInput formControlName="title" />
            <mat-error
              *ngIf="
                newIssueForm.get('title').touched &&
                newIssueForm.get('title').invalid
              "
            >
              {{
                this.newIssueForm.get("title").errors.required
                  ? "Title is required."
                  : ""
              }}
            </mat-error>
          </mat-form-field>
          <angular-editor
            formControlName="description"
            [config]="editorConfig"
          ></angular-editor>
          <mat-error
            [ngStyle]="{
              visibility:
                newIssueForm.get('description').touched &&
                newIssueForm.get('description').invalid
                  ? 'visible'
                  : 'hidden',
              'font-size': '10.5px',
              'margin-left': '10px'
            }"
          >
            {{
              this.newIssueForm.get("description") && this.newIssueForm.get("description").errors && this.newIssueForm.get("description").errors.required
                ? "Description is required."
                : ""
            }}
          </mat-error>

          <div>
            <button
              mat-stroked-button
              type="button"
              (click)="filePicker.click()"
            >
              Pick Image
            </button>
            <input type="file"
             multiple accept='image/*'

            #filePicker (change)="onImagePicked($event)" />
          </div>
          <div
            class="image-preview"
            *ngIf="
              imagePreview
            "
          >
          <ng-container *ngFor="let file of imagePreview">

            <img [src]="file"  />
          </ng-container>
          </div>

          <div class="buttons top-margin">
            <button
              class="w-100"
              [disabled]="
                newIssueForm && newIssueForm.touched && newIssueForm.invalid
              "
              mat-raised-button
              color="primary"
              type="submit"
            >
              Create Issue
            </button>
          </div>
        </form>
      </div>
    </div>
  </mat-card>
</div>
